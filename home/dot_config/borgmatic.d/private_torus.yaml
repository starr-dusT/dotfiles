source_directories:
    - /engi/apps # Docker containers and data
    #- /engi/backup # Static files and service dumps
    #- /home/tstarr/Sync # Syncthing files on Torus

exclude_patterns:
    - 'code-server/config/*'
    - 'code-server/workspace/*'
    - 'immich/library/*'

archive_name_format: 'borg-torus-{now}'
repositories:
    #- path: ssh://user@backupserver/./sourcehostname.borg
    #  label: backupserver
    - path: /engi/backup/borg/borg-apps
      label: local

before_backup:
  - echo "Running pre-backup scripts! $(date)" >> /engi/test/test.txt
  - tree /engi > /engi/backup/tree.txt
  - stop-docker-containers
  #- sudo -u gitea backup-dump-gitea

after_backup:
  - restore-docker-containters
    
keep_daily: 7
keep_weekly: 4
keep_monthly: 6

encryption_passphrase: "***REMOVED***"
